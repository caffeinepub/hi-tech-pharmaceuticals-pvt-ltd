{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Profile field expansion, admin Hot Products, and Net Rate/MRP pricing UI updates",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Extend the customer profile setup and profile displays to include phone number, PAN number, and address with safe handling when fields are missing.",
      "acceptanceCriteria": [
        "Backend `UserProfile` includes fields for phone number, PAN number, and address (in addition to existing name/email).",
        "Existing customers who already created a profile can still load their profile without errors after the update (missing fields handled safely).",
        "`ProfileSetupDialog` prompts for Full Name, Email Address, Phone Number, PAN Number, and Address (English labels), and saves them via the existing save profile mutation.",
        "Checkout page “Customer Information” displays the new fields when present (and does not break if they are empty).",
        "Admin order-customer details view (used in admin order detail) includes the new profile fields when present."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/auth/ProfileSetupDialog.tsx",
          "operation": "modify",
          "description": "Add controlled inputs for Phone Number, PAN Number, and Address (English labels), include them in the save payload, and update any remaining profile-setup copy that references “wholesale” in the pricing context. Use the selected \"authorization\" component guidance to keep the profile-setup gating consistent with authenticated user flows. Verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/pages/CheckoutPage.tsx",
          "operation": "modify",
          "description": "Extend the “Customer Information” card to render phone number, PAN number, and address when present, and safely display an English fallback (e.g., “Not provided”) when missing/empty without breaking checkout rendering."
        },
        {
          "path": "frontend/src/pages/admin/AdminOrderDetailPage.tsx",
          "operation": "modify",
          "description": "Extend the admin customer details panel to include phone number, PAN number, and address when present, and keep safe fallbacks for missing values (English) so existing orders/profiles continue to display without errors."
        }
      ]
    },
    {
      "id": "REQ-2",
      "summary": "Support admin-managed Hot Products and update the Home page to render only admin-marked hot products with an empty state.",
      "acceptanceCriteria": [
        "Backend product model supports a persisted hot/featured flag for each product.",
        "Admin product editor UI includes a clear control (e.g., checkbox/switch) to set whether a product is a Hot Product.",
        "Home page Hot Products section renders products that are marked hot; it no longer uses `products.slice(0, 4)` selection logic.",
        "If no products are marked hot, the Home page Hot Products section shows an appropriate empty state message (in English) and does not crash."
      ],
      "file_operations": [
        {
          "path": "frontend/src/hooks/useQueries.ts",
          "operation": "modify",
          "description": "Add React Query hooks to fetch hot products (using the existing backend capability) and to mark/unmark a product as hot (admin-only mutation). Ensure query invalidation keeps the products list and hot-products list in sync after updates."
        },
        {
          "path": "frontend/src/components/admin/ProductEditorDialog.tsx",
          "operation": "modify",
          "description": "Add an admin control (e.g., checkbox/switch) to set/unset a product’s Hot Product flag, bind it to form state, and include it in the save mutation payload. Verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/pages/HomePage.tsx",
          "operation": "modify",
          "description": "Replace the `products.slice(0, 4)` logic with the hot-products query, render only products marked hot, and show an English empty state message when the hot-products list is empty. Keep add-to-cart behavior unchanged aside from using the updated product pricing fields where needed."
        }
      ]
    },
    {
      "id": "REQ-3",
      "summary": "Replace “Wholesale” pricing with “Net Rate” and add MRP across admin editor, product displays, and cart/checkout calculations (Net Rate used for totals).",
      "acceptanceCriteria": [
        "Backend product model supports two numeric prices: Net Rate and MRP.",
        "Admin product editor shows two numeric inputs labeled 'Net Rate (NPR)' and 'MRP (NPR)' (replacing 'Wholesale Price (NPR)').",
        "ProductCard replaces the 'wholesale' label with 'Net Rate' and shows MRP as a secondary value (formatting is consistent and readable).",
        "Product detail page replaces 'Wholesale Price' with 'Net Rate' and also shows MRP.",
        "Cart and checkout totals continue to compute using the Net Rate price (not MRP).",
        "Any remaining user-facing text that says 'Wholesale' in the pricing context is updated to 'Net Rate' (English)."
      ],
      "file_operations": [
        {
          "path": "frontend/src/hooks/useQueries.ts",
          "operation": "modify",
          "description": "Update the product save mutation wrapper to use Net Rate and MRP (and pass the Hot Product flag where applicable), aligning the hook’s mutation inputs with the current backend interface. Ensure relevant queries are invalidated after updates."
        },
        {
          "path": "frontend/src/components/admin/ProductEditorDialog.tsx",
          "operation": "modify",
          "description": "Replace the single price input with two numeric inputs labeled 'Net Rate (NPR)' and 'MRP (NPR)', populate initial values from the product when editing, and submit Net Rate as the transactional price field along with MRP. Preserve existing photo upload integration (selected \"blob-storage\" is already used via ExternalBlob); verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/pages/admin/AdminProductsPage.tsx",
          "operation": "modify",
          "description": "Update the admin products table to display Net Rate (and optionally MRP) with English labels, and remove/replace any 'Wholesale' pricing text in the pricing context."
        },
        {
          "path": "frontend/src/components/products/ProductCard.tsx",
          "operation": "modify",
          "description": "Update pricing UI to display Net Rate as the primary price and MRP as a secondary value, and replace the 'wholesale' label with 'Net Rate' (English). Ensure formatting remains readable and consistent."
        },
        {
          "path": "frontend/src/pages/ProductDetailPage.tsx",
          "operation": "modify",
          "description": "Replace the 'Wholesale Price' label with 'Net Rate', display MRP alongside it, and update add-to-cart to store Net Rate as the cart item price used for totals."
        },
        {
          "path": "frontend/src/pages/CartPage.tsx",
          "operation": "modify",
          "description": "Ensure all cart line item and total calculations continue to use the stored transactional price (Net Rate) and that any user-facing pricing text referencing 'Wholesale' in the pricing context is updated to 'Net Rate' (English) where applicable."
        },
        {
          "path": "frontend/src/pages/CheckoutPage.tsx",
          "operation": "modify",
          "description": "Ensure checkout order item rows and total calculations use Net Rate (from cart item price), and update any pricing-context 'Wholesale' text to 'Net Rate' (English) if present."
        },
        {
          "path": "frontend/src/pages/HomePage.tsx",
          "operation": "modify",
          "description": "Update add-to-cart mapping to use product Net Rate as the cart item price so downstream cart/checkout calculations remain transactional on Net Rate (not MRP)."
        }
      ]
    }
  ]
}